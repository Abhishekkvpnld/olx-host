{"ast":null,"code":"import React,{Fragment,useState,useContext}from'react';import{useNavigate}from'react-router-dom';import'./Create.css';import Header from'../Header/Header';import{FirebaseContext}from'../../store/Context';import{getStorage,ref,uploadBytes,getDownloadURL}from'firebase/storage';import{getFirestore,collection,addDoc}from'firebase/firestore';import{onAuthStateChanged,getAuth}from'firebase/auth';import ClipLoader from\"react-spinners/ClipLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Create=()=>{const[Name,setName]=useState('');const[Category,setCategory]=useState('');const[Price,setPrice]=useState('');const[Image,setImage]=useState(null);const[Loading,setLoading]=useState(false);const storage=getStorage();const Navigate=useNavigate();const{firebaseApp}=useContext(FirebaseContext);const firestore=getFirestore(firebaseApp);const auth=getAuth(firebaseApp);const loading=()=>{setLoading(true);setTimeout(()=>{setLoading(false);},5000);};const handleSubmit=e=>{e.preventDefault();loading();onAuthStateChanged(auth,user=>{const userId=user.uid;const storageRef=ref(storage,\"Image/\".concat(Image.name));uploadBytes(storageRef,Image).then(snapShot=>{getDownloadURL(snapShot.ref).then(url=>{console.log(url);addDoc(collection(firestore,'products'),{Name,Category,Price,url,userId,createdAt:new Date().toDateString()}).then(()=>{Navigate('/');});});});});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),Loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(ClipLoader,{color:\"#0000FF\"})}):null,/*#__PURE__*/_jsx(\"card\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"centerDiv\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"Name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",id:\"fname\",name:\"Name\",value:Name,onChange:e=>{setName(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"Category\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",id:\"fname\",name:\"category\",value:Category,onChange:e=>{setCategory(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"Price\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",id:\"fname\",name:\"Price\",required:true,value:Price,onChange:e=>{setPrice(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{alt:\"Posts\",width:\"200px\",height:\"200px\",src:Image?URL.createObjectURL(Image):null}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",required:true,onChange:e=>{setImage(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"uploadBtn\",onClick:handleSubmit,children:\"upload and Submit\"})]})]})})]});};export default Create;","map":{"version":3,"names":["React","Fragment","useState","useContext","useNavigate","Header","FirebaseContext","getStorage","ref","uploadBytes","getDownloadURL","getFirestore","collection","addDoc","onAuthStateChanged","getAuth","ClipLoader","jsx","_jsx","jsxs","_jsxs","Create","Name","setName","Category","setCategory","Price","setPrice","Image","setImage","Loading","setLoading","storage","Navigate","firebaseApp","firestore","auth","loading","setTimeout","handleSubmit","e","preventDefault","user","userId","uid","storageRef","concat","name","then","snapShot","url","console","log","createdAt","Date","toDateString","children","className","color","htmlFor","type","id","value","onChange","target","required","alt","width","height","src","URL","createObjectURL","files","onClick"],"sources":["C:/Users/JISHN/Documents/projects/react/olx-host/src/Components/Create/Create.js"],"sourcesContent":["import React, { Fragment,useState,useContext } from 'react';\r\nimport {useNavigate} from 'react-router-dom'\r\nimport './Create.css';\r\nimport Header from '../Header/Header';\r\nimport {FirebaseContext} from '../../store/Context'\r\nimport {getStorage,ref,uploadBytes,getDownloadURL} from 'firebase/storage'\r\nimport {getFirestore, collection, addDoc} from 'firebase/firestore'\r\nimport { onAuthStateChanged, getAuth } from 'firebase/auth';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\n\r\nconst Create = () => {\r\n\r\nconst [Name,setName]= useState('')\r\nconst [Category,setCategory]=useState('')\r\nconst [Price,setPrice]= useState('')\r\nconst [Image,setImage]= useState(null)\r\nconst [Loading, setLoading] = useState(false)\r\nconst storage =getStorage()\r\nconst Navigate =useNavigate()\r\n\r\nconst { firebaseApp } = useContext(FirebaseContext);\r\nconst firestore = getFirestore(firebaseApp);\r\n\r\nconst auth =getAuth(firebaseApp)\r\n\r\nconst loading = () => {\r\n  setLoading(true)\r\n  setTimeout(() => {\r\n    setLoading(false)\r\n  }, 5000)\r\n\r\n}\r\n\r\nconst handleSubmit=(e)=>{\r\n  e.preventDefault()\r\n  loading()\r\n  onAuthStateChanged(auth, (user) => {const userId =user.uid\r\n  const storageRef= ref(storage, `Image/${Image.name}`)\r\n  uploadBytes(storageRef,Image).then((snapShot)=>{\r\n    getDownloadURL(snapShot.ref).then((url) => {\r\n      console.log(url);\r\n      addDoc(collection(firestore, 'products'), {\r\n        Name,\r\n        Category,\r\n        Price,\r\n        url,\r\n        userId,\r\n        createdAt:new Date().toDateString()\r\n       }).then(()=>{\r\n        Navigate('/')\r\n       })\r\n    })\r\n  })\r\n})\r\n\r\n}\r\n\r\n\r\n  return (\r\n    <Fragment>\r\n      <Header />\r\n      {Loading ?\r\n      <div  className='loading'>\r\n     <ClipLoader color=\"#0000FF\" />\r\n      </div>\r\n    : null\r\n  }\r\n\r\n      <card>\r\n        <div className=\"centerDiv\">\r\n          <form>\r\n            <label htmlFor=\"fname\">Name</label>\r\n            <br />\r\n            <input\r\n              className=\"input\"\r\n              type=\"text\"\r\n              id=\"fname\"\r\n              name=\"Name\"\r\n              value={Name}\r\n              onChange={(e)=>{\r\n                   setName(e.target.value)\r\n              }}\r\n             required\r\n            />\r\n            <br />\r\n            <label htmlFor=\"fname\">Category</label>\r\n            <br />\r\n            <input\r\n              className=\"input\"\r\n              type=\"text\"\r\n              id=\"fname\"\r\n              name=\"category\"\r\n              value={Category}\r\n              onChange={(e)=>{\r\n                setCategory(e.target.value)\r\n              }}\r\n              required\r\n            />\r\n            <br />\r\n            <label htmlFor=\"fname\">Price</label>\r\n            <br />\r\n            <input className=\"input\" type=\"number\" id=\"fname\" name=\"Price\" required value={Price} onChange={(e)=>{setPrice(e.target.value)}}/>\r\n            <br />\r\n          </form>\r\n          <br />\r\n          <img alt=\"Posts\" width=\"200px\" height=\"200px\" src={Image ? URL.createObjectURL(Image) : null} ></img>\r\n          <form>\r\n            <br />\r\n            <input type=\"file\" required  onChange={(e)=>{setImage(e.target.files[0])}}/>\r\n            <br />\r\n            <button className=\"uploadBtn\" onClick={ handleSubmit}>upload and Submit</button>\r\n          </form>\r\n        </div>\r\n      </card>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}