{"ast":null,"code":"import _slicedToArray from\"C:/Users/JISHN/Documents/projects/react/olx clone/olx-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useContext}from'react';import{useNavigate}from'react-router-dom';import'./Create.css';import Header from'../Header/Header';import{FirebaseContext}from'../../store/Context';import{getStorage,ref,uploadBytes,getDownloadURL}from'firebase/storage';import{getFirestore,collection,addDoc}from'firebase/firestore';import{onAuthStateChanged,getAuth}from'firebase/auth';import ClipLoader from\"react-spinners/ClipLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),Category=_useState4[0],setCategory=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),Price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),Image=_useState8[0],setImage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),Loading=_useState10[0],setLoading=_useState10[1];var storage=getStorage();var Navigate=useNavigate();var _useContext=useContext(FirebaseContext),firebaseApp=_useContext.firebaseApp;var firestore=getFirestore(firebaseApp);var auth=getAuth(firebaseApp);var loading=function loading(){setLoading(true);setTimeout(function(){setLoading(false);},5000);};var handleSubmit=function handleSubmit(e){e.preventDefault();loading();onAuthStateChanged(auth,function(user){var userId=user.uid;var storageRef=ref(storage,\"Image/\".concat(Image.name));uploadBytes(storageRef,Image).then(function(snapShot){getDownloadURL(snapShot.ref).then(function(url){console.log(url);addDoc(collection(firestore,'products'),{Name:Name,Category:Category,Price:Price,url:url,userId:userId,createdAt:new Date().toDateString()}).then(function(){Navigate('/');});});});});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),Loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(ClipLoader,{color:\"#0000FF\"})}):null,/*#__PURE__*/_jsx(\"card\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"centerDiv\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"Name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",id:\"fname\",name:\"Name\",value:Name,onChange:function onChange(e){setName(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"Category\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",id:\"fname\",name:\"category\",value:Category,onChange:function onChange(e){setCategory(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"Price\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",id:\"fname\",name:\"Price\",required:true,value:Price,onChange:function onChange(e){setPrice(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{alt:\"Posts\",width:\"200px\",height:\"200px\",src:Image?URL.createObjectURL(Image):null}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",required:true,onChange:function onChange(e){setImage(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"uploadBtn\",onClick:handleSubmit,children:\"upload and Submit\"})]})]})})]});};export default Create;","map":{"version":3,"names":["React","Fragment","useState","useContext","useNavigate","Header","FirebaseContext","getStorage","ref","uploadBytes","getDownloadURL","getFirestore","collection","addDoc","onAuthStateChanged","getAuth","ClipLoader","jsx","_jsx","jsxs","_jsxs","Create","_useState","_useState2","_slicedToArray","Name","setName","_useState3","_useState4","Category","setCategory","_useState5","_useState6","Price","setPrice","_useState7","_useState8","Image","setImage","_useState9","_useState10","Loading","setLoading","storage","Navigate","_useContext","firebaseApp","firestore","auth","loading","setTimeout","handleSubmit","e","preventDefault","user","userId","uid","storageRef","concat","name","then","snapShot","url","console","log","createdAt","Date","toDateString","children","className","color","htmlFor","type","id","value","onChange","target","required","alt","width","height","src","URL","createObjectURL","files","onClick"],"sources":["C:/Users/JISHN/Documents/projects/react/olx clone/olx-clone/src/Components/Create/Create.js"],"sourcesContent":["import React, { Fragment,useState,useContext } from 'react';\r\nimport {useNavigate} from 'react-router-dom'\r\nimport './Create.css';\r\nimport Header from '../Header/Header';\r\nimport {FirebaseContext} from '../../store/Context'\r\nimport {getStorage,ref,uploadBytes,getDownloadURL} from 'firebase/storage'\r\nimport {getFirestore, collection, addDoc} from 'firebase/firestore'\r\nimport { onAuthStateChanged, getAuth } from 'firebase/auth';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\n\r\nconst Create = () => {\r\n\r\nconst [Name,setName]= useState('')\r\nconst [Category,setCategory]=useState('')\r\nconst [Price,setPrice]= useState('')\r\nconst [Image,setImage]= useState(null)\r\nconst [Loading, setLoading] = useState(false)\r\nconst storage =getStorage()\r\nconst Navigate =useNavigate()\r\n\r\nconst { firebaseApp } = useContext(FirebaseContext);\r\nconst firestore = getFirestore(firebaseApp);\r\n\r\nconst auth =getAuth(firebaseApp)\r\n\r\nconst loading = () => {\r\n  setLoading(true)\r\n  setTimeout(() => {\r\n    setLoading(false)\r\n  }, 5000)\r\n\r\n}\r\n\r\nconst handleSubmit=(e)=>{\r\n  e.preventDefault()\r\n  loading()\r\n  onAuthStateChanged(auth, (user) => {const userId =user.uid\r\n  const storageRef= ref(storage, `Image/${Image.name}`)\r\n  uploadBytes(storageRef,Image).then((snapShot)=>{\r\n    getDownloadURL(snapShot.ref).then((url) => {\r\n      console.log(url);\r\n      addDoc(collection(firestore, 'products'), {\r\n        Name,\r\n        Category,\r\n        Price,\r\n        url,\r\n        userId,\r\n        createdAt:new Date().toDateString()\r\n       }).then(()=>{\r\n        Navigate('/')\r\n       })\r\n    })\r\n  })\r\n})\r\n\r\n}\r\n\r\n\r\n  return (\r\n    <Fragment>\r\n      <Header />\r\n      {Loading ?\r\n      <div  className='loading'>\r\n     <ClipLoader color=\"#0000FF\" />\r\n      </div>\r\n    : null\r\n  }\r\n\r\n      <card>\r\n        <div className=\"centerDiv\">\r\n          <form>\r\n            <label htmlFor=\"fname\">Name</label>\r\n            <br />\r\n            <input\r\n              className=\"input\"\r\n              type=\"text\"\r\n              id=\"fname\"\r\n              name=\"Name\"\r\n              value={Name}\r\n              onChange={(e)=>{\r\n                   setName(e.target.value)\r\n              }}\r\n             required\r\n            />\r\n            <br />\r\n            <label htmlFor=\"fname\">Category</label>\r\n            <br />\r\n            <input\r\n              className=\"input\"\r\n              type=\"text\"\r\n              id=\"fname\"\r\n              name=\"category\"\r\n              value={Category}\r\n              onChange={(e)=>{\r\n                setCategory(e.target.value)\r\n              }}\r\n              required\r\n            />\r\n            <br />\r\n            <label htmlFor=\"fname\">Price</label>\r\n            <br />\r\n            <input className=\"input\" type=\"number\" id=\"fname\" name=\"Price\" required value={Price} onChange={(e)=>{setPrice(e.target.value)}}/>\r\n            <br />\r\n          </form>\r\n          <br />\r\n          <img alt=\"Posts\" width=\"200px\" height=\"200px\" src={Image ? URL.createObjectURL(Image) : null} ></img>\r\n          <form>\r\n            <br />\r\n            <input type=\"file\" required  onChange={(e)=>{setImage(e.target.files[0])}}/>\r\n            <br />\r\n            <button className=\"uploadBtn\" onClick={ handleSubmit}>upload and Submit</button>\r\n          </form>\r\n        </div>\r\n      </card>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}